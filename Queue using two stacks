class QueueUsingTwoStacks:
    def __init__(self):
        self.stack1 = []
        self.stack2 = []

    def enqueue(self, item):
        self.stack1.append(item)

    def dequeue(self):
        if not self.stack2:
            while self.stack1:
                self.stack2.append(self.stack1.pop())

        if not self.stack2:
            raise IndexError("dequeue from empty queue")

        return self.stack2.pop()

    def peek(self):
        if not self.stack2:
            while self.stack1:
                self.stack2.append(self.stack1.pop())

        if not self.stack2:
            raise IndexError("peek from empty queue")

        return self.stack2[-1]

def process_queries(n, queries):
    queue = QueueUsingTwoStacks()
    result = []
    
    for query in queries:
        query_parts = query.split()
        query_type = int(query_parts[0])
        
        if query_type == 1:
            x = int(query_parts[1])
            queue.enqueue(x)
        elif query_type == 2:
            queue.dequeue()
        elif query_type == 3:
            result.append(queue.peek())
    
    return result


n = int(input())
queries = [input().strip() for _ in range(n)]
result = process_queries(n, queries)
for res in result:
    print(res)
